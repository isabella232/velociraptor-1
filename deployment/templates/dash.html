{% extends 'base.html' %}
{% load stripchar %}

{% block content %}
<div id="dash-tasks"></div>
<h1>Procs <small>as reported by supervisord </small></h1>
<div class="proc-filters">
  <div class="btn-group hostlist" data-toggle="buttons-radio">
    <button class="btn btn-mini btn-inverse procfilter" data-filter="*">All</button>
    <button class="btn btn-mini btn-success procfilter" data-filter=".RUNNING">Running</button>
    <button class="btn btn-mini btn-danger procfilter" data-filter=".FATAL">Fatal</button>
    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="#">
      By Host
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
      {% for host in hosts %}
      <li><a href="#" class="procfilter" data-filter=".host-{{ host.name|stripchar:"." }}">{{ host }}</a>
      {% endfor %}
    </ul>
  </div>
</div>
<div id="dash-procs">
</div>
{% endblock content %}


{% block script %}
<script src="/static/js/jquery.isotope.js"></script>
<script src="/static/js/dash.js"></script>

{# template for list of processes inside each host block #}
<script id="host-procs-tmpl" type="text/goatee">
  <%#states%>
  <div class="host-status label <%statename%> host-<%hostclass%>" data-host="<%host%>"><%shortname%></div>
  <%/states%>
</ul>
</script>

{# template for list of currently running jobs #}
<script id="tasks-tmpl" type="text/goatee">
  <h1>Current Tasks</h1>
  <div>
  <ul class="host-procs-list">
    <%#tasks%>
      <li class="label"><%desc%></li>
    <%/tasks%>
    <ul class="host-procs-list">
    </div>
</script>
{% endblock script %}
